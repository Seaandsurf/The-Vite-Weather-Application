(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function i(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(t){if(t.ep)return;t.ep=!0;const o=i(t);fetch(t.href,o)}})();const l=document.querySelector(".city-input"),g=document.querySelector(".search"),$=document.querySelector(".location"),f=document.querySelector(".current-weather"),u=document.querySelector(".weather-cards"),d="0152f2d8a6931898cd9a7065c98bd01e",p=(r,e,i)=>i===0?`<div class="details">
                    <h2><i class="fa-regular fa-calendar" style="color: #2264ff;"></i>  ${r} ${e.dt_txt.split(" ")[0]}</h2>
                    <h4><i class="fa-solid fa-temperature-quarter" style="color: #ff0000;"></i> ${(e.main.temp_min-273.15).toFixed(1)}°C</h4>
                    <h4><i class="fa-solid fa-temperature-full" style="color: #1dae0a;"></i> ${(e.main.temp_max-273.15).toFixed(1)}°C</h4> 
                    <h4><i class="fa-solid fa-wind" style="color: #2264ff;"></i> ${(e.wind.speed*3.6).toFixed(1)} Km/h</h4>
                    <h4><i class="fa-solid fa-droplet" style="color: #2264ff;"></i> ${e.main.humidity}%</h4>
                </div>
                <div class="icon">
                    <img src="https://openweathermap.org/img/wn/${e.weather[0].icon}@4x.png" alt="weather-icon">
                    <h4>${e.weather[0].description}</h4>
                </div>`:`<li class="card">
            <h3><i class="fa-regular fa-calendar" style="color: #2264ff;"></i>  ${e.dt_txt.split(" ")[0]}</h3>
            <img src="https://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png" alt="weather-icon">
            <h4><i class="fa-solid fa-temperature-quarter" style="color: #ff0000;"></i> ${(e.main.temp_min-273.15).toFixed(1)}°C</h4>
            <h4><i class="fa-solid fa-temperature-full" style="color: #1dae0a;"></i> ${(e.main.temp_max-273.15).toFixed(1)}°C</h4> 
            <h4><i class="fa-solid fa-wind" style="color: #2264ff;"></i> ${(e.wind.speed*3.6).toFixed(1)} Km/h</h4>
            <h4><i class="fa-solid fa-droplet" style="color: #2264ff;"></i> ${e.main.humidity}%</h4>
        </li>`,h=async(r,e,i)=>{try{const s=`https://api.openweathermap.org/data/2.5/forecast?lat=${e}&lon=${i}&appid=${d}`,o=await(await fetch(s)).json(),a=[],m=o.list.filter(c=>{const n=new Date(c.dt_txt).getDate();return a.includes(n)?!1:(a.push(n),!0)});l.value="",f.innerHTML="",u.innerHTML="",m.forEach((c,n)=>{n===0?f.insertAdjacentHTML("beforeend",p(r,c,n)):u.insertAdjacentHTML("beforeend",p(r,c,n))})}catch{alert("Une erreur est survenue !")}},y=async()=>{try{const r=l.value.trim();if(!r)return;const e=`https://api.openweathermap.org/geo/1.0/direct?q=${r}&limit=1&appid=${d}`,s=await(await fetch(e)).json();if(!s.length)return alert(`Les coordonnées sont inconnues pour ${r}`);const{name:t,lat:o,lon:a}=s[0];h(t,o,a)}catch{alert("Une erreur est survenue !")}},v=()=>{navigator.geolocation.getCurrentPosition(async r=>{try{const{latitude:e,longitude:i}=r.coords,s=`https://api.openweathermap.org/geo/1.0/reverse?lat=${e}&lon=${i}&limit=1&appid=${d}`,o=await(await fetch(s)).json(),{name:a}=o[0];h(a,e,i)}catch{alert("Une erreur est survenue !")}},r=>{r.code===r.PERMISSION_DENIED&&alert("Geolocalisation refusée par l'utilisateur !")})};g.addEventListener("click",y);$.addEventListener("click",v);l.addEventListener("keyup",r=>{r.key==="Enter"&&y()});
